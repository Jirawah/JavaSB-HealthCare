####services:
####  network-deploy-service:
####    networks:
####      - healthcare
####
####  microservice-db-config:
####    extends:
####      service: network-deploy-service
####    image: mysql
####    healthcheck:
####      test: [ "CMD", "mysqladmin", "ping", "-h", "localhost" ]
####      timeout: 10s
####      retries: 10
####      interval: 10s
####      start_period: 10s
####    environment:
####      MYSQL_ROOT_PASSWORD: root
####
####  configserver:
####    image: "Jirawah/healthcare-configserver:latest"
####    container_name: configserver-ms
####    ports:
####      - "8071:8071"
####    healthcheck:
####      test: "curl --fail --silent localhost:8071/actuator/health/readiness"
####      interval: 10s
####      timeout: 5s
####      retries: 10
####      start_period: 10s
####    extends:
####      file: common.config.yml
####      service: microservice-base-config
####
####  eurekaserver:
####    image: "Jirawah/eurekaserver:latest"
####    container_name: eurekaserver-ms
####    ports:
####      - "8070:8070"
####    depends_on:
####      configserver:
####        condition: service_healthy
####    healcheck:
####      test: "curl --fail --silent localhost:8070/actuator/health/readness"
####      interval: 10s
####      timeout: 5s
####      retries: 10
####      start_period: 10s
####    extends:
####      file: common-config.yml
####      service: microservice-configserver-config
####      environment:
####        SPRING_APPLICATION_NAME: "eurekaserver"
###services:
###  network-deploy-service:
###    networks:
###      - healthcare
###
###  microservice-db-config:
###    extends:
###      service: network-deploy-service
###    image: mysql
###    healthcheck:
###      test: [ "CMD", "mysqladmin", "ping", "-h", "localhost" ]
###      timeout: 10s
###      retries: 10
###      interval: 10s
###      start_period: 10s
###    environment:
###      MYSQL_ROOT_PASSWORD: root
###
###  configserver:
###    image: "Jirawah/healthcare-configserver:latest"
###    container_name: configserver-ms
###    ports:
###      - "8071:8071"
###    healthcheck:
###      test: "curl --fail --silent localhost:8071/actuator/health/readiness"
###      interval: 10s
###      timeout: 5s
###      retries: 10
###      start_period: 10s
###    extends:
###      file: common.config.yml
###      service: microservice-base-config
###
###  eurekaserver:
###    image: "Jirawah/eurekaserver:latest"
###    container_name: eurekaserver-ms
###    ports:
###      - "8070:8070"
###    depends_on:
###      configserver:
###        condition: service_healthy
###    healcheck:
###      test: "curl --fail --silent localhost:8070/actuator/health/readness"
###      interval: 10s
###      timeout: 5s
###      retries: 10
###      start_period: 10s
###    extends:
###      file: common-config.yml
###      service: microservice-configserver-config
###      environment:
###        SPRING_APPLICATION_NAME: "eurekaserver"
##
##services:
##  network-deploy-service:
##    networks:
##      - healthcare
##
##  microservice-base-config:
##    extends:
##      service: network-deploy-service
##    networks:
##      - healthcare
##
##  microservice-db-config:
##    extends:
##      service: network-deploy-service
##    image: mysql
##    healthcheck:
##      test: [ "CMD", "mysqladmin", "ping", "-h", "localhost" ]
##      timeout: 10s
##      retries: 10
##      interval: 10s
##      start_period: 10s
##    environment:
##      MYSQL_ROOT_PASSWORD: root
##
##  configserver:
##    image: "Jirawah/healthcare-configserver:latest"
##    container_name: configserver-ms
##    ports:
##      - "8071:8071"
##    healthcheck:
##      test: "curl --fail --silent localhost:8071/actuator/health/readiness"
##      interval: 10s
##      timeout: 5s
##      retries: 10
##      start_period: 10s
##    extends:
##      file: common-config.yml
##      service: microservice-base-config
##
##  eurekaserver:
##    image: "Jirawah/eurekaserver:latest"
##    container_name: eurekaserver-ms
##    ports:
##      - "8070:8070"
##    depends_on:
##      configserver:
##        condition: service_healthy
##    healthcheck:  # corrig√© ici
##      test: "curl --fail --silent localhost:8070/actuator/health/readiness"
##      interval: 10s
##      timeout: 5s
##      retries: 10
##      start_period: 10s
##    extends:
##      file: common-config.yml
##      service: microservice-base-config
##    environment:
##      SPRING_APPLICATION_NAME: "eurekaserver"
##
##networks:
##  healthcare:
#
#services:
#  network-deploy-service:
#    networks:
#      - healthcare
#
#  microservice-base-config:
#    extends:
#      service: network-deploy-service
#    networks:
#      - healthcare
#
#  microservice-db-config:
#    extends:
#      service: network-deploy-service
#    image: mysql
#    healthcheck:
#      test: [ "CMD", "mysqladmin", "ping", "-h", "localhost" ]
#      timeout: 10s
#      retries: 10
#      interval: 10s
#      start_period: 10s
#    environment:
#      MYSQL_ROOT_PASSWORD: root
#
#  microservice-configserver-config:   # <-- Ajout ici
#    extends:
#      service: network-deploy-service
#    networks:
#      - healthcare
#
#  configserver:
#    image: "Jirawah/healthcare-configserver:latest"
#    container_name: configserver-ms
#    ports:
#      - "8071:8071"
#    healthcheck:
#      test: "curl --fail --silent localhost:8071/actuator/health/readiness"
#      interval: 10s
#      timeout: 5s
#      retries: 10
#      start_period: 10s
#    extends:
#      file: common-config.yml
#      service: microservice-base-config
#
#  eurekaserver:
#    image: "Jirawah/eurekaserver:latest"
#    container_name: eurekaserver-ms
#    ports:
#      - "8070:8070"
#    depends_on:
#      configserver:
#        condition: service_healthy
#    healthcheck:
#      test: "curl --fail --silent localhost:8070/actuator/health/readiness"
#      interval: 10s
#      timeout: 5s
#      retries: 10
#      start_period: 10s
#    extends:
#      file: common-config.yml
#      service: microservice-configserver-config
#    environment:
#      SPRING_APPLICATION_NAME: "eurekaserver"
#
#networks:
#  healthcare:
#

services:

  network-deploy-service:
    networks:
      - healthcare

  microservice-base-config:
    extends:
      service: network-deploy-service
    networks:
      - healthcare

  microservice-db-config:
    extends:
      service: network-deploy-service
    image: mysql
    healthcheck:
      test: [ "CMD", "mysqladmin", "ping", "-h", "localhost" ]
      timeout: 10s
      retries: 10
      interval: 10s
      start_period: 10s
    environment:
      MYSQL_ROOT_PASSWORD: root
    networks:
      - healthcare

  microservice-configserver-config:
    extends:
      service: network-deploy-service
    networks:
      - healthcare

networks:
  healthcare:
